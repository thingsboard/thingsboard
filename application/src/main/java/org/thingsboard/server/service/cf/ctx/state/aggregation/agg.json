{
  "type": "LATEST_VALUES_AGGREGATION",
  "name": "Occupied spaces",
  "debugSettings": {
    "failuresEnabled": true,
    "allEnabled": true,
    "allEnabledUntil": 1769907492297
  },
  "entityId": {
    "entityType": "ASSET",
    "id": "cc830710-a4cf-11f0-87cb-2d6683c4fccf"
  },
  "configuration": {
    "type": "LATEST_VALUES_AGGREGATION",
    "source": {
      "relation": {
        "direction": "FROM",
        "relationType": "Contains"
      },
      "entityProfiles": [
        {
          "entityType": "DEVICE_PROFILE",
          "id": "d7a05580-a4cf-11f0-87cb-2d6683c4fccf"
        }
      ]
    },
    "inputs": {
      "oc": {
        "key": "occupied",
        "type": "TS_LATEST"
      }
    },
    "deduplicationIntervalMillis": 10000,
    "metrics": {
      "totalSpaces": {
        "function": "COUNT",
        "input": {
          "type": "function",
          "function" : "return 1;"
        }
      },
      "occupiedSpaces": {
        "function": "COUNT",
        "filter": "return oc == true",
        "input": {
          "type": "key",
          "key" : "oc"
        }
      },
      "freeSpaces": {
        "function": "COUNT",
        "filter": "return oc == false",
        "input": {
          "type": "key",
          "key" : "oc"
        }
      }
    },
    "output": {
      "type": "TIME_SERIES",
      "decimals": 2
    },
    "useLatestTsFromInputs": "true"
  }
}
